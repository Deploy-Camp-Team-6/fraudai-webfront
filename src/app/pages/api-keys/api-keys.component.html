<ion-content [fullscreen]="true">
  <div class="app-container">
    <div class="page-header">
      <h1>API Keys</h1>
      <ion-button (click)="createKey()">
        <ion-icon slot="start" name="add"></ion-icon>
        Generate New Key
      </ion-button>
    </div>
    <p class="page-subtitle">Manage your API keys for accessing the FraudAI service.</p>

    <app-card>
      <div *ngIf="apiKeys.length > 0; else emptyState" class="table-container">
        <table>
          <thead>
            <tr>
              <th>Name</th>
              <th>Key</th>
              <th>Created</th>
              <th>Last Used</th>
              <th></th>
            </tr>
          </thead>
          <tbody>
            <tr *ngFor="let key of apiKeys">
              <td>{{ key.name }}</td>
              <td>
                <div class="key-cell">
                  <span>{{ key.prefix }}</span>
                  <ion-button fill="clear" size="small" (click)="copyKey(key.key)">
                    <ion-icon slot="icon-only" name="copy-outline"></ion-icon>
                  </ion-button>
                </div>
              </td>
              <td>{{ key.createdAt | date:'mediumDate' }}</td>
              <td>{{ key.lastUsed ? (key.lastUsed | date:'mediumDate') : 'Never' }}</td>
              <td>
                <ion-button fill="clear" size="small" color="danger" (click)="revokeKey(key)">
                  <ion-icon slot="icon-only" name="trash"></ion-icon>
                </ion-button>
              </td>
            </tr>
          </tbody>
        </table>
      </div>

      <ng-template #emptyState>
        <div class="empty-state">
          <h3>No API Keys Yet</h3>
          <p>Generate your first API key to get started.</p>
          <ion-button (click)="createKey()" fill="outline">Generate Key</ion-button>
        </div>
      </ng-template>
    </app-card>
  </div>
</ion-content>
