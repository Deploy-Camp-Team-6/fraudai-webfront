<ion-content [fullscreen]="true">
  <div class="playground-container app-container">
    <div class="playground-layout">
      <!-- Request Panel -->
      <div class="request-panel">
        <app-card>
          <div class="panel-header">
            <h3>Request</h3>
            <p>Configure and send a request to the FraudAI API.</p>
          </div>

          <ion-list>
            <ion-item>
              <ion-select label="Model" label-placement="stacked" [value]="selectedModelId" (ionChange)="onModelChange($event)">
                <ion-select-option *ngFor="let model of availableModels" [value]="model.id">
                  {{ model.name }}
                </ion-select-option>
              </ion-select>
            </ion-item>
            <ion-item>
              <ion-textarea
                label="JSON Body"
                labelPlacement="stacked"
                [autoGrow]="true"
                class="json-editor"
                [(ngModel)]="requestBody"
              ></ion-textarea>
            </ion-item>
          </ion-list>
        </app-card>
      </div>

      <!-- Response Panel -->
      <div class="response-panel">
        <app-card>
          <div class="panel-header response-header">
            <h3>Response</h3>
            <div class="status-chips" *ngIf="responseStatus">
              <app-stat-chip color="success">{{ responseStatus }}</app-stat-chip>
              <app-stat-chip color="neutral">{{ responseLatency }}ms</app-stat-chip>
            </div>
          </div>

          <ion-segment *ngIf="responseBody" [(ngModel)]="responseTab">
            <ion-segment-button value="pretty">Pretty</ion-segment-button>
            <ion-segment-button value="raw">Raw</ion-segment-button>
          </ion-segment>

          <div *ngIf="responseBody; else emptyState" class="response-content">
            <app-code-block [language]="'json'" [code]="responseBody"></app-code-block>
          </div>
          <ng-template #emptyState>
            <div class="empty-state">
              <p>Click "Run" to send a request and see the response here.</p>
            </div>
          </ng-template>
        </app-card>
      </div>
    </div>
  </div>

  <!-- Sticky Action Bar -->
  <div class="sticky-actions">
    <div class="actions-container app-container">
      <ion-button (click)="loadExample()" fill="clear" color="medium">
        <ion-icon slot="start" name="document-text-outline"></ion-icon>
        Load Example
      </ion-button>
      <div class="main-actions">
        <ion-button (click)="clear()" fill="outline" color="danger" [disabled]="isLoading || !responseBody">
          <ion-icon slot="start" name="refresh-outline"></ion-icon>
          Clear
        </ion-button>
        <ion-button (click)="runInference()" [disabled]="isLoading">
          <ion-spinner *ngIf="isLoading; else runIcon" name="crescent" style="width: 1.2em; height: 1.2em; margin-right: 8px;"></ion-spinner>
          <ng-template #runIcon>
            <ion-icon slot="start" name="play-outline"></ion-icon>
          </ng-template>
          {{ isLoading ? 'Running...' : 'Run' }}
        </ion-button>
      </div>
    </div>
  </div>
</ion-content>
